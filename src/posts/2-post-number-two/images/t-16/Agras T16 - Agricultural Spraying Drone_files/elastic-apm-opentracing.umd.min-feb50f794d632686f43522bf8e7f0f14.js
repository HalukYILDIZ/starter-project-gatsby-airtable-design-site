!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FORMAT_BINARY="binary",e.FORMAT_TEXT_MAP="text_map",e.FORMAT_HTTP_HEADERS="http_headers",e.REFERENCE_CHILD_OF="child_of",e.REFERENCE_FOLLOWS_FROM="follows_from"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(){function t(){}return t.prototype.context=function(){return this._context()},t.prototype.tracer=function(){return this._tracer()},t.prototype.setOperationName=function(t){return this._setOperationName(t),this},t.prototype.setBaggageItem=function(t,e){return this._setBaggageItem(t,e),this},t.prototype.getBaggageItem=function(t){return this._getBaggageItem(t)},t.prototype.setTag=function(t,e){return this._addTags(((n={})[t]=e,n)),this;var n},t.prototype.addTags=function(t){return this._addTags(t),this},t.prototype.log=function(t,e){return this._log(t,e),this},t.prototype.logEvent=function(t,e){return this._log({event:t,payload:e})},t.prototype.finish=function(t){this._finish(t)},t.prototype._context=function(){return r.spanContext},t.prototype._tracer=function(){return r.tracer},t.prototype._setOperationName=function(t){},t.prototype._setBaggageItem=function(t,e){},t.prototype._getBaggageItem=function(t){},t.prototype._addTags=function(t){},t.prototype._log=function(t,e){},t.prototype._finish=function(t){},t}();e.Span=i,e["default"]=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),i=n(3),a=n(1),o=function(){function t(){}return t.prototype.startSpan=function(t,e){if(void 0===e&&(e={}),e.childOf){var n=r.childOf(e.childOf);e.references?e.references.push(n):e.references=[n],delete e.childOf}return this._startSpan(t,e)},t.prototype.inject=function(t,e,n){return t instanceof a["default"]&&(t=t.context()),this._inject(t,e,n)},t.prototype.extract=function(t,e){return this._extract(t,e)},t.prototype._startSpan=function(t,e){return i.span},t.prototype._inject=function(t,e,n){},t.prototype._extract=function(t,e){return i.spanContext},t}();e.Tracer=o,e["default"]=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(9),a=n(2);e.tracer=null,e.spanContext=null,e.span=null,e.initialize=function(){e.tracer=new a["default"],e.span=new r["default"],e.spanContext=new i["default"]}},function(t,e,n){var r,i,a;!function(o,s){"use strict";i=[n(6)],void 0===(a="function"==typeof(r=function(t){function e(t,e,n){if("function"==typeof Array.prototype.map)return t.map(e,n);for(var r=new Array(t.length),i=0;i<t.length;i++)r[i]=e.call(n,t[i]);return r}function n(t,e,n){if("function"==typeof Array.prototype.filter)return t.filter(e,n);for(var r=[],i=0;i<t.length;i++)e.call(n,t[i])&&r.push(t[i]);return r}var r=/(^|@)\S+\:\d+/,i=/^\s*at .*(\S+\:\d+|\(native\))/m,a=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(i))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(t.replace(/[\(\)]/g,""));return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(r){return e(n(r.stack.split("\n"),function(t){return!!t.match(i)},this),function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),i=n.join(" ")||void 0,a=function(t,e){if("function"==typeof Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}(["eval","<anonymous>"],r[0])>-1?void 0:r[0];return new t(i,(void 0),a,r[1],r[2],e)},this)},parseFFOrSafari:function(r){return e(n(r.stack.split("\n"),function(t){return!t.match(a)},this),function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t(e);var n=e.split("@"),r=this.extractLocation(n.pop()),i=n.join("@")||void 0;return new t(i,(void 0),r[0],r[1],r[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),i=[],a=2,o=r.length;a<o;a+=2){var s=n.exec(r[a]);s&&i.push(new t((void 0),(void 0),s[2],s[1],(void 0),r[a]))}return i},parseOpera10:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),i=[],a=0,o=r.length;a<o;a+=2){var s=n.exec(r[a]);s&&i.push(new t(s[3]||void 0,(void 0),s[2],s[1],(void 0),r[a]))}return i},parseOpera11:function(i){return e(n(i.stack.split("\n"),function(t){return!!t.match(r)&&!t.match(/^Error created at/)},this),function(e){var n,r=e.split("@"),i=this.extractLocation(r.pop()),a=r.shift()||"",o=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(n=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new t(o,s,i[0],i[1],i[2],e)},this)}}})?r.apply(e,i):r)||(t.exports=a)}()},,function(t,e,n){var r,i,a;!function(n,o){"use strict";i=[],void 0===(a="function"==typeof(r=function(){function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,n,r,i,a){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==i&&this.setColumnNumber(i),void 0!==a&&this.setSource(a)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(t(this.getLineNumber())?":"+this.getLineNumber():"")+(t(this.getColumnNumber())?":"+this.getColumnNumber():"")}},e})?r.apply(e,i):r)||(t.exports=a)}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(8),a=n(1);e.childOf=function(t){return t instanceof a["default"]&&(t=t.context()),new i["default"](r.REFERENCE_CHILD_OF,t)},e.followsFrom=function(t){return t instanceof a["default"]&&(t=t.context()),new i["default"](r.REFERENCE_FOLLOWS_FROM,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(t,e){this._type=t,this._referencedContext=e instanceof r["default"]?e.context():e}return t.prototype.type=function(){return this._type},t.prototype.referencedContext=function(){return this._referencedContext},t}();e["default"]=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){};e.SpanContext=r,e["default"]=r},function(t,e,n){"use strict";function r(t){return Boolean(t&&void 0!==t.length)}function i(){}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn(function(){var t=1===r._state?e.onFulfilled:e.onRejected;if(null!==t){var n;try{n=t(r._value)}catch(r){return void c(e.promise,r)}s(e.promise,n)}else(1===r._state?s:c)(e.promise,r._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void u(t);if("function"==typeof n)return void d((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(e){c(t,e)}var r,i}function c(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)o(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,c(e,t))})}catch(t){if(n)return;n=!0,c(e,t)}}function p(t){return function(t){for(var e=[],n=0;n<t.length;n++)e.push(lt[t[n]]);return e.join("")}("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues(vt):"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues?msCrypto.getRandomValues(vt):vt).substr(0,t)}function l(t,e){var n=!1;return"string"==typeof e?n=t===e:Array.isArray(e)&&e.forEach(function(e){n||(n=l(t,e))}),n}function h(){return dt&&"function"==typeof Array.prototype.forEach&&"function"==typeof JSON.stringify&&"function"==typeof Function.bind&&pt&&"function"==typeof pt.now&&"withCredentials"in new window.XMLHttpRequest}function v(t,e,n){if(n&&t){var r=x(t),i=typeof e;return null!=e&&"boolean"!==i&&"number"!==i&&(e=String(e)),n[r]=e,n}}function g(){return pt.timing.fetchStart}function m(t){return t&&t.split("?")[0]}function y(t){return null!==t&&"object"==typeof t}function _(t,e,n){for(var r=0,i=e.length;r<i;++r){var a=e[r];if(y(a)||"function"==typeof a)for(var o=Object.keys(a),s=0,c=o.length;s<c;s++){var u=o[s],f=a[u];n&&y(f)?(y(t[u])||(t[u]=Array.isArray(f)?[]:{}),_(t[u],[f],!1)):t[u]=f}}return t}function b(){if("undefined"!=typeof document){var t=document.currentScript;return t||function(){if("undefined"!=typeof document)for(var t=document.getElementsByTagName("script"),e=0,n=t.length;e<n;e++){var r=t[e];if(r.src.indexOf("elastic")>0)return r}}()}}function T(t){return _(t,ft.call(arguments,1),!1)}function S(t){return _(t,ft.call(arguments,1),!0)}function w(t){return void 0===t}function E(){}function x(t){return t.replace(/[.*"]/g,"_")}function O(){return pt.now()}function L(t){return"number"==typeof t&&t>=0?t:O()}function k(t,e){return w(e)||w(t)?null:parseInt(e-t)}function C(t){ut.resolve().then(t)}function I(){return"function"==typeof pt.getEntriesByType}function N(t){return"__apm_symbol__"+t}function j(t,e,n){for(var r=t;r&&!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);!r&&t[e]&&(r=t);var i,a,o,s,c=N(e);if(r&&!(i=r[c])){i=r[c]=r[e];var u=r&&Object.getOwnPropertyDescriptor(r,e);if(!(s=u)||!1!==s.writable&&("function"!=typeof s.get||void 0!==s.set)){var f=n(i,c,e);r[e]=function(){return f(this,arguments)},a=r[e],o=i,a[N("OriginalDelegate")]=o}}return i}function F(t){function e(e){e.state=St,t(St,e)}function n(n){XMLHttpRequest[Kt]=!1,n.state=Tt,t(Tt,n);var r=n.data,o=r.aborted,s=r.target;i||(i=s[Et],a=s[xt]);var f,d=s[Gt];d&&(a.call(s,c,d),a.call(s,u,d));var p=s[Gt]=function(t){var r=t.type;f?f!=r&&function(t){setTimeout(t,0)}(function(){n.state!==St&&e(n)}):s.readyState===s.DONE&&!o&&XMLHttpRequest[Kt]&&n.state===Tt&&(f=r)};i.call(s,c,p),i.call(s,u,p),s[Zt]||(s[Zt]=n)}var r=XMLHttpRequest.prototype,i=r[Et],a=r[xt];if(!i){var o=window.XMLHttpRequestEventTarget;if(o){var s=o.prototype;i=s[Et],a=s[xt]}}var c="readystatechange",u="load",f=j(r,"open",function(){return function(t,e){return t[mt]||(t[bt]=e[0],t[_t]=e[1],t[yt]=!1===e[2]),f.apply(t,e)}}),d=j(r,"send",function(){return function(t,r){if(t[mt])return d.apply(t,r);var i={source:Ft,state:"",type:"macroTask",data:{target:t,method:t[bt],sync:t[yt],url:t[_t],aborted:!1}};n(i);var a=d.apply(t,r);return XMLHttpRequest[Kt]=!0,t[yt]&&e(i),a}}),p=j(r,"abort",function(){return function(e,n){if(!e[mt]){var r=e[Zt];if(r&&"string"==typeof r.type){if(r.data&&r.data.aborted)return;!function(e){e.state=wt,t(wt,e),e.data.aborted=!0}(r)}}return p.apply(e,n)}})}function R(t,e,n){return t instanceof Element&&Qt.indexOf(e)>=0&&"function"==typeof n}function A(){return oe||(oe=!0,F(function(t,e){ae.send(Ft,[t,e])}),function(t){function e(e){e.state=Tt,t(Tt,e)}function n(e){e.state=St,t(St,e)}if(window.fetch&&window.Request){var r=window.fetch;window.fetch=function(t,i){var a,o,s=this,c=arguments;if("string"==typeof t)a=new Request(t,i),o=t;else{if(!t)return r.apply(s,c);o=(a=t).url}var u={source:Rt,state:"",type:"macroTask",data:{target:a,method:a.method,url:o,aborted:!1}};return new ut(function(t,i){var o;gt.fetchInProgress=!0,e(u);try{o=r.apply(s,[a])}catch(t){return i(t),u.data.error=t,n(u),void(gt.fetchInProgress=!1)}o.then(function(e){t(e),C(function(){u.data.response=e,n(u)})},function(t){i(t),C(function(){u.data.error=t,n(u)})}),gt.fetchInProgress=!1})}}}(function(t,e){ae.send(Rt,[t,e])}),function(t){if(window.history){var e=history.pushState;"function"==typeof e&&(history.pushState=function(n,r,i){var a={source:At,data:{state:n,title:r,url:i}};t(St,a),e.apply(this,arguments)})}}(function(t,e){ae.send(At,[t,e])}),function(t){function e(t,e,n,r){for(var i=0;i<t.length;i++){var a=t[i];if(a.eventType===e&&a.listenerFn===n&&a.capture===r)return i}return-1}function n(t){return"boolean"==typeof t?t:!!t&&!!t.capture}function r(r,i,a,o){function s(){var e;t(Tt,p);try{e=a.apply(this,arguments)}finally{t(St,p)}return e}var c=te[i];if(!c)return a;var u=r[c],f=n(o);if(u){var d=e(u,i,a,f);if(-1!==d)return u[d].wrappingFn}else u=r[c]=[];var p={source:Mt,target:r,eventType:i,listenerFn:a,capture:f,wrappingFn:s};return u.push(p),s}function i(t,r,i,a){var o=te[r],s=t[o];if(s){var c=e(s,r,i,n(a));if(-1!==c){var u=s[c];return s.splice(c,1),0===s.length&&(t[o]=void 0),u.wrappingFn}}return i}if(window.EventTarget){var a=window.EventTarget.prototype,o=a[Et],s=a[xt];a[Et]=function(t,e,n){var i=this;if(!R(i,t,e))return o.apply(i,arguments);var a=r(i,t,e,n),s=Array.prototype.slice.call(arguments);return s[1]=a,o.apply(i,s)},a[xt]=function(t,e,n){var r=this;if(!R(r,t,e))return s.apply(r,arguments);var a=i(r,t,e,n),o=Array.prototype.slice.call(arguments);return o[1]=a,s.apply(r,o)}}}(function(t,e){ae.send(Mt,[t,e])})),ae}function M(t){var e={transfer_size:t.transferSize,encoded_body_size:t.encodedBodySize,decoded_body_size:t.decodedBodySize},n=function(t){void 0===t&&(t=[]);for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r.name,a=r.duration,o=r.description,s=i;o&&(s+=";desc="+o),a&&(s+=";dur="+a),e.push(s)}return e.join(", ")}(t.serverTiming);return n&&(e.headers={"server-timing":n}),e}function P(t,e){var n=t.port,r=t.protocol,i=t.hostname,a=t.host,o=function(t,e){return""===t&&(t="http:"===e?"80":"https:"===e?"443":""),t}(n,r),s=i.charCodeAt(0)===de&&i.charCodeAt(i.length-1)===pe,c=i;return s&&(c=i.slice(1,-1)),{service:{name:r+"//"+a,resource:i+":"+o,type:e},address:c,port:Number(o)}}function q(){return{page:{referer:document.referrer,url:window.location.href}}}function H(t,e){if(e){var n;switch(t.type){case le:n=function(t){var e,n=t.url,r=t.method,i=t.target,a=t.response,o=new fe(n),s=P(o,le),c={http:{method:r,url:o.href},destination:s};return i&&void 0!==i.status?e=i.status:a&&(e=a.status),c.http.status_code=e,c}(e);break;case he:n=function(t){var e=t.entry,n=t.url,r=P(new fe(n),he);return{http:{url:n,response:M(e)},destination:r}}(e)}t.addContext(n)}}function D(t,e){var n=void 0===e?{}:e,r=(n.tags,function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(n,["tags"])),i=q(),a={};if(t.type===kt&&I()){var o=pt.getEntriesByType(Dt);o&&o.length>0&&(a={response:M(o[0])})}t.addContext(i,a,r)}function B(t,e){var n=e.capturePaint,r=t.getEntriesByType(qt),i={spans:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r.name,a=r.startTime,o=r.duration,s=r.attribution,c=a+o,u=new ve("Longtask("+i+")",qt,{startTime:a});if(s.length>0){var f=s[0],d=f.name,p=f.containerType,l=f.containerName,h=f.containerId,v={attribution:d,type:p};l&&(v.name=l),h&&(v.id=h),u.addContext({custom:v})}u.end(c),e.push(u)}return e}(r),marks:{}};if(!n)return i;var a=t.getEntriesByType(Ut),o=a[a.length-1];if(o){var s=parseInt(o.renderTime||o.loadTime);ge.lcp=s,i.marks.largestContentfulPaint=s}var c=pt.timing,u=c.fetchStart-c.navigationStart,f=t.getEntriesByName(zt)[0];if(f){var d=parseInt(u>=0?f.startTime-u:f.startTime);ge.fcp=d,i.marks.firstContentfulPaint=d}var p=function(t){for(var e={start:1/0,duration:0},n=0;n<t.length;n++){var r=t[n],i=r.name,a=r.startTime,o=r.duration;if(!(a<ge.fcp||"self"!==i&&-1===i.indexOf("same-origin"))){e.start=Math.min(e.start,a);var s=o-50;s>0&&(e.duration+=s)}}return e}(r),l=p.duration,h=p.start;if(l>0){var v=new ve("Total Blocking Time",qt,{startTime:h});v.end(h+l),i.spans.push(v)}var g=function(t){var e=t[0];if(e&&!ge.wasHidden){var n=e.startTime,r=e.processingStart,i=new ve("First Input Delay",$t,{startTime:n});return i.end(r),i}}(t.getEntriesByType($t));return g&&i.spans.push(g),i}function z(){return h()?(A(),ge.wasHidden="hidden"===document.visibilityState,window.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(ge.wasHidden=!0)},{capture:!0,once:!0}),ye=!0):dt&&console.log("[Elastic APM] platform is not supported!"),ye}function U(t){var e=t.error,n=t.filename,r=t.lineno,i=t.colno,a=[];if(e)try{a=be.a.parse(e)}catch(t){}return 0===a.length&&(a=[{fileName:n,lineNumber:r,columnNumber:i}]),a.map(function(t){return t.functionName&&(t.functionName=(e=t.functionName,n=e.split("/"),e=(e=(e=n.length>1?["Object",n[n.length-1]].join("."):n[0]).replace(/.<$/gi,".<anonymous>")).replace(/^Anonymous function$/,"<anonymous>"),e=(n=e.split(".")).length>1?n[n.length-1]:n[0])),t;var e,n}).map(function(t){var e=t.fileName,n=t.lineNumber,r=t.columnNumber,i=t.functionName,a=void 0===i?"<anonymous>":i;if(!e&&!n)return{};if(!r&&!n)return{};var o,s,c=function(t){return void 0===t&&(t=""),"<anonymous>"===t&&(t=""),t}(e),u=(o=c,s=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),o.indexOf(s)>-1&&(o=o.replace(s+"/","")),o);return function(t){return!!t&&0===window.location.href.indexOf(t)}(c)&&(u="(inline script)"),{abs_path:e,filename:u,"function":a,lineno:n,colno:r}})}function $(t){return null==t||""===t||void 0===t}function V(t,e,n){var r=function(t,e,n,r){return void 0===e&&(e=Wt),void 0===n&&(n=!1),void 0===r&&(r="N/A"),n&&$(t)&&(t=r),"string"==typeof t?t.substring(0,e):t}(t[e],n[0],n[1]);$(r)?delete t[e]:t[e]=r}function X(t,e,n){void 0===t&&(t={}),void 0===n&&(n=e);for(var r=Object.keys(t),i=[],a=function(a){var o=r[a],s=!0===t[o]?i:t[o];Array.isArray(s)?"*"===o?Object.keys(n).forEach(function(t){return V(n,t,s)}):V(n,o,s):X(s,e,n[o])},o=0;o<r.length;o++)a(o);return e}function J(t,e,n,r,i){return void 0===i&&(i=0),"number"==typeof t&&"number"==typeof e&&t>=i&&e>t&&t-i>=n&&e-i<=r&&e-t<Lt&&t-i<Lt&&e-i<Lt}function Y(t){var e=t.name,n=t.initiatorType,r=t.startTime,i=t.responseEnd,a="resource";n&&(a+="."+n);var o=m(e),s=new ve(o,a);return s._start=r,s.end(i,{url:e,entry:t}),s}function W(){var t=function(){var t=pt.timing,e=t.fetchStart,n={};return je.forEach(function(r){var i=t[r];i&&i>=e&&(n[r]=parseInt(i-e))}),n}();return{navigationTiming:t,agent:{timeToFirstByte:t.responseStart,domInteractive:t.domInteractive,domComplete:t.domComplete}}}function Z(t){if(t.captureTimings){var e=t._end;if(t.type===kt){if(t.marks&&t.marks.custom){var n=t.marks.custom;Object.keys(n).forEach(function(e){n[e]+=t._start})}t._start=0;var r=pt.timing;(function(t,e,n,r){for(var i=[],a=0;a<Ne.length;a++){var o=t[Ne[a][0]],s=t[Ne[a][1]];if(J(o,s,n,r,e)){var c=new ve(Ne[a][2],"hard-navigation.browser-timing");"requestStart"===Ne[a][0]&&(c.pageResponse=!0),c._start=o-e,c.end(s-e),i.push(c)}}return i})(r,r.fetchStart,0,e).forEach(function(e){e.traceId=t.traceId,e.sampled=t.sampled,e.pageResponse&&t.options.pageLoadSpanId&&(e.id=t.options.pageLoadSpanId),t.spans.push(e)}),t.addMarks(W())}if(I()){var i=t._start;(function(t,e,n,r){for(var i=[],a=0;a<t.length;a++){var o=t[a],s=o.initiatorType,c=o.name,u=o.startTime,f=o.responseEnd;if("xmlhttprequest"!==s&&"fetch"!==s&&c)if(-1!==Ot.indexOf(s)){if(!J(u,f,n,r))continue;i.push(Y(t[a]))}else{if(null!=s)continue;for(var d=!1,p=0;p<e.length;p++){var l=c.lastIndexOf(e[p]);if(l>-1&&l===c.length-e[p].length){d=!0;break}}!d&&J(u,f,n,r)&&i.push(Y(t[a]))}}return i})(pt.getEntriesByType(Bt),function(t){for(var e=t.spans,n=[],r=0;r<e.length;r++){var i=e[r];"external"===i.type&&"http"===i.subtype&&n.push(i.name.split(" ")[1])}return n}(t),i,e).forEach(function(e){return t.spans.push(e)}),function(t,e,n){for(var r=[],i=0;i<t.length;i++){var a=t[i],o=a.name,s=a.startTime,c=a.duration,u=s+c;if(!(c<=jt)&&J(s,u,e,n)){var f=new ve(o,"app");f._start=s,f.end(u),r.push(f)}}return r}(pt.getEntriesByType(Ht),i,e).forEach(function(e){return t.spans.push(e)})}}}function G(t){return{ts:t.transfer_size,ebs:t.encoded_body_size,dbs:t.decoded_body_size}}function K(t){if(!t)return null;var e={},n=t.page,r=t.http,i=t.response,a=t.destination,o=t.user,s=t.custom;if(n&&(e.p={rf:n.referer,url:n.url}),r&&(e.h=function(t){var e={},n=t.method,r=t.status_code,i=t.url,a=t.response;return e.url=i,n&&(e.mt=n),r&&(e.sc=r),a&&(e.r=G(a)),e}(r)),i&&(e.r=G(i)),a){var c=a.service;e.dt={se:{n:c.name,t:c.type,rc:c.resource},ad:a.address,po:a.port}}return o&&(e.u={id:o.id,un:o.username,em:o.email}),s&&(e.cu=s),e}function Q(t){if(!t)return null;var e=t.navigationTiming,n=t.agent,r={nt:{}};Fe.forEach(function(t,n){var i=je[n];r.nt[t]=e[i]}),r.a={fb:r.nt.rs,di:r.nt.di,dc:r.nt.dc};var i=n.firstContentfulPaint,a=n.largestContentfulPaint;return i&&(r.a.fp=i),a&&(r.a.lp=a),r}function tt(t){return{value:t}}function et(t,e){var n=e.details,r=e.count,i=void 0===r?1:r,a=e.duration;return{transaction:t,span:n,samples:{"span.self_time.count":tt(i),"span.self_time.sum.us":tt(a)}}}function nt(t,e){void 0===e&&(e=pt.timing);var n=[],r=t.duration(),i=t.name,a=t.type,o=t.sampled,s={name:i,type:a};if(n.push({transaction:s,samples:{"transaction.duration.count":tt(1),"transaction.duration.sum.us":tt(r),"transaction.breakdown.count":tt(o?1:0)}}),!o)return n;if(a===kt&&e)for(var c=0;c<Be.length;c++){var u=Be[c],f=k(e[u[0]],e[u[1]]);0!==f&&null!=f&&n.push(et(s,{details:{type:u[2]},duration:f}))}else{var d=function(t){var e={},n=function(t){var e=t.spans,n=t._start,r=t._end;if(0===e.length)return t.duration();e.sort(function(t,e){return t._start-e._start});for(var i=e[0],a=i._end,o=i._start,s=a,c=o-n,u=1;u<e.length;u++)o=(i=e[u])._start,a=i._end,o>s?(c+=o-s,s=a):a>s&&(s=a);return s<r&&(c+=r-s),c}(t);e.app={count:1,duration:n};for(var r=t.spans,i=0;i<r.length;i++){var a=r[i],o=a.duration();if(0!==o&&null!=o){var s=a.type,c=a.subtype,u=s.replace(Yt,"");c&&(u+="."+c),e[u]||(e[u]={duration:0,count:0}),e[u].count++,e[u].duration+=o}}return e}(t);Object.keys(d).forEach(function(t){var e=t.split("."),r=e[0],i=e[1],a=d[t],o=a.duration,c=a.count;n.push(et(s,{details:{type:r,subtype:i},duration:o,count:c}))})}return n}function rt(){return Pe.TransactionService=function(t){var e=t.getService([Xt,Vt]),n=e[0],r=e[1];return new Ue(n,r)},Pe.PerformanceMonitoring=function(t){var e=t.getService([Jt,Vt,Xt,"TransactionService"]),n=e[0],r=e[1],i=e[2],a=e[3];return new De(n,r,i,a)},Pe.ErrorLogging=function(t){var e=t.getService([Jt,Vt,"TransactionService"]),n=e[0],r=e[1],i=e[2];return new ke(n,r,i)},new qe}function it(t){return e=t.serviceFactory,n=e.getService("PerformanceMonitoring"),r=e.getService("TransactionService"),i=e.getService("ErrorLogging"),a=e.getService("LoggingService"),new Ge(n,r,a,i);var e,n,r,i,a}n.r(e),n.d(e,"createTracer",function(){return it}),n.d(e,"init",function(){return Xe}),n.d(e,"apm",function(){return Ve}),n.d(e,"apmBase",function(){return Ve}),n.d(e,"ApmBase",function(){return $e});var at=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},ot=setTimeout;a.prototype["catch"]=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(i);return o(this,new f(t,e,n)),n},a.prototype["finally"]=at,a.all=function(t){return new a(function(e,n){function i(t,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(e){i(t,e)},n)}a[t]=r,0==--o&&e(a)}catch(t){n(t)}}if(!r(t))return n(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return e([]);for(var o=a.length,s=0;s<a.length;s++)i(s,a[s])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(t){return new a(function(e,n){if(!r(t))return n(new TypeError("Promise.race accepts an array"));for(var i=0,o=t.length;i<o;i++)a.resolve(t[i]).then(e,n)})},a._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){ot(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var st=a,ct={};dt?ct=window:"undefined"!=typeof self&&(ct=self);for(var ut=("Promise"in ct?ct.Promise:st),ft=[].slice,dt="undefined"!=typeof window,pt=dt&&"undefined"!=typeof performance?performance:{},lt=[],ht=0;ht<256;++ht)lt[ht]=(ht+256).toString(16).substr(1);for(var vt=new Uint8Array(16),gt={fetchInProgress:!1},mt=N("xhrIgnore"),yt=N("xhrSync"),_t=N("xhrURL"),bt=N("xhrMethod"),Tt="schedule",St="invoke",wt="clear",Et="addEventListener",xt="removeEventListener",Ot=["link","css","script","img","xmlhttprequest","fetch","beacon","iframe"],Lt=3e5,kt="page-load",Ct="custom",It="Unknown",Nt=[kt,"route-change","user-interaction","http-request",Ct,"temporary"],jt=60,Ft="xmlhttprequest",Rt="fetch",At="history",Mt="eventtarget",Pt="error",qt="longtask",Ht="measure",Dt="navigation",Bt="resource",zt="first-contentful-paint",Ut="largest-contentful-paint",$t="first-input",Vt="ConfigService",Xt="LoggingService",Jt="ApmServer",Yt=".truncated",Wt=1024,Zt=N("xhrTask"),Gt=N("xhrListener"),Kt=N("xhrScheduled"),Qt=["click"],te={},ee=0;ee<Qt.length;ee++){var ne=Qt[ee];te[ne]=N(ne)}var re,ie=function(){function t(){this.observers={}}var e=t.prototype;return e.observe=function(t,e){var n=this;if("function"==typeof e)return this.observers[t]||(this.observers[t]=[]),this.observers[t].push(e),function(){var r=n.observers[t].indexOf(e);r>-1&&n.observers[t].splice(r,1)}},e.sendOnly=function(t,e){var n=this.observers[t];n&&n.forEach(function(t){try{t.apply(void 0,e)}catch(t){console.log(t,t.stack)}})},e.send=function(t,e){this.sendOnly(t+":before",e),this.sendOnly(t,e),this.sendOnly(t+":after",e)},t}(),ae=new ie,oe=!1,se=function(){function t(t,e,n){void 0===n&&(n={}),t||(t=It),e||(e=Ct),this.name=t,this.type=e,this.options=n,this.id=n.id||p(16),this.traceId=n.traceId,this.sampled=n.sampled,this.timestamp=n.timestamp,this._start=L(n.startTime),this._end=void 0,this.ended=!1,this.onEnd=n.onEnd}var e=t.prototype;return e.ensureContext=function(){this.context||(this.context={})},e.addLabels=function(t){this.ensureContext();var e=this.context;e.tags||(e.tags={}),Object.keys(t).forEach(function(n){return v(n,t[n],e.tags)})},e.addContext=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];0!==e.length&&(this.ensureContext(),S.apply(void 0,[this.context].concat(e)))},e.end=function(t){this.ended||(this.ended=!0,this._end=L(t),this.callOnEnd())},e.callOnEnd=function(){"function"==typeof this.onEnd&&this.onEnd(this)},e.duration=function(){return k(this._start,this._end)},t}(),ce=[["#","hash"],["?","query"],["/","path"],["@","auth",1],[NaN,"host",void 0,1]],ue=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,fe=function(){function t(t){var e,n=this.extractProtocol(t||""),r=n.protocol,i=n.address,a=n.slashes,o=!r&&!a,s=this.getLocation(),c=ce.slice();i=i.replace("\\","/"),a||(c[2]=[NaN,"path"]);for(var u=0;u<c.length;u++){var f=c[u],d=f[0],p=f[1];if("string"==typeof d){if(~(e=i.indexOf(d))){var l=f[2];if(l){var h=i.lastIndexOf(d);e=Math.max(e,h),this[p]=i.slice(0,e),i=i.slice(e+l)}else this[p]=i.slice(e),i=i.slice(0,e)}}else this[p]=i,i="";this[p]=this[p]||o&&f[3]&&s[p]||"",f[3]&&(this[p]=this[p].toLowerCase())}if(o&&"/"!==this.path.charAt(0)&&(this.path="/"+this.path),this.relative=o,this.protocol=r||s.protocol,this.hostname=this.host,this.port="",/:\d+$/.test(this.host)){var v=this.host.split(":"),g=v.pop(),m=v.join(":");!function(t,e){switch(e){case"http:":return"80"===t;case"https:":return"443"===t}return!0}(g,this.protocol)?this.port=g:this.host=m,this.hostname=m}this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString()}var e=t.prototype;return e.toString=function(){var t=this.protocol;if(t+="//",this.auth){var e=this.auth.split(":");t+=(e[0]?"[REDACTED]":"")+(e[1]?":[REDACTED]":"")+"@"}return t+=this.host,t+=this.path,t+=this.query,t+=this.hash},e.getLocation=function(){var t={};return dt&&(t=window),t.location},e.extractProtocol=function(t){var e=ue.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],address:e[3]}},t}(),de=91,pe=93,le="external",he="resource",ve=function(t){function e(e,n,r){var i;if((i=t.call(this,e,n,r)||this).parentId=i.options.parentId,i.subtype=void 0,i.action=void 0,-1!==i.type.indexOf(".")){var a=i.type.split(".",3);i.type=a[0],i.subtype=a[1],i.action=a[2]}return i.sync=i.options.sync,i}var n,r;return r=t,(n=e).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,e.prototype.end=function(e,n){t.prototype.end.call(this,e),H(this,n)},e}(se),ge={fcp:0},me=function(){function t(t){this.po={observe:E,disconnect:E},window.PerformanceObserver&&(this.po=new PerformanceObserver(t))}var e=t.prototype;return e.start=function(t){try{var e=!0;t===qt&&(e=!1),this.po.observe({type:t,buffered:e})}catch(t){}},e.stop=function(){this.po.disconnect()},t}(),ye=!1,_e=n(4),be=n.n(_e),Te={service:{name:[Wt,!0],version:!0,agent:{version:[Wt,!0]},environment:!0},labels:{"*":!0}},Se={"*":!0,headers:{"*":!0}},we={user:{id:!0,email:!0,username:!0},tags:{"*":!0},http:{response:Se},destination:{address:[Wt],service:{"*":[Wt,!0]}},response:Se},Ee={name:[Wt,!0],type:[Wt,!0],id:[Wt,!0],trace_id:[Wt,!0],parent_id:[Wt,!0],transaction_id:[Wt,!0],subtype:!0,action:!0,context:we},xe={name:!0,parent_id:!0,type:[Wt,!0],id:[Wt,!0],trace_id:[Wt,!0],
span_count:{started:[Wt,!0]},context:we},Oe={id:[Wt,!0],trace_id:!0,transaction_id:!0,parent_id:!0,culprit:!0,exception:{type:!0},transaction:{type:!0},context:we},Le=["stack","message"],ke=function(){function t(t,e,n){this._apmServer=t,this._configService=e,this._transactionService=n}var e=t.prototype;return e.createErrorDataModel=function(t){var e=function(t){return t.filter(function(t){var e=t.filename,n=t.lineno;return void 0!==e&&void 0!==n})}(U(t)),n="(inline script)",r=e[e.length-1];r&&r.filename&&(n=r.filename);var i=t.message,a=t.error,o=i,s="",c={};if(a&&"object"==typeof a){o=o||a.message,s=a.name;var u=function(t){var e=!1,n={};if(Object.keys(t).forEach(function(r){if(!(Le.indexOf(r)>=0)){var i=t[r];if(null!=i&&"function"!=typeof i){if("object"==typeof i){if("function"!=typeof i.toISOString)return;i=i.toISOString()}n[r]=i,e=!0}}}),e)return n}(a);u&&(c.custom=u)}s||o&&o.indexOf(":")>-1&&(s=o.split(":")[0]);var f=this._transactionService.getCurrentTransaction(),d=f?f.context:{},l=this._configService.get("context"),h=(l.tags,function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(l,["tags"])),v=S({},q(),d,h,c),g={id:p(),culprit:n,exception:{message:o,stacktrace:e,type:s},context:v};return f&&(g=T(g,{trace_id:f.traceId,parent_id:f.id,transaction_id:f.id,transaction:{type:f.type,sampled:f.sampled}})),X(Oe,g)},e.logErrorEvent=function(t){if(void 0!==t){var e=this.createErrorDataModel(t);void 0!==e.exception.message&&this._apmServer.addError(e)}},e.registerListeners=function(){var t=this;window.addEventListener("error",function(e){return t.logErrorEvent(e)}),window.addEventListener("unhandledrejection",function(e){return t.logPromiseEvent(e)})},e.logPromiseEvent=function(t){var e="Unhandled promise rejection: ",n=t.reason;null==n?this.logError(e+"<no reason specified>"):"string"==typeof n.message?this.logError({message:e+n.message,stack:n.stack?n.stack:null}):"object"!=typeof n&&this.logError(e+n)},e.logError=function(t){var e={};return"string"==typeof t?e.message=t:e.error=t,this.logErrorEvent(e)},t}(),Ce=function(){function t(t,e){void 0===e&&(e={}),this.onFlush=t,this.items=[],this.queueLimit=e.queueLimit||-1,this.flushInterval=e.flushInterval||0,this.timeoutId=void 0}var e=t.prototype;return e._setTimer=function(){var t=this;this.timeoutId=setTimeout(function(){return t.flush()},this.flushInterval)},e._clear=function(){void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.items=[]},e.flush=function(){this.onFlush(this.items),this._clear()},e.add=function(t){this.items.push(t),-1!==this.queueLimit&&this.items.length>=this.queueLimit?this.flush():void 0===this.timeoutId&&this._setTimer()},t}(),Ie=function(){function t(){}return t.stringify=function(t){return JSON.stringify(t)+"\n"},t}(),Ne=[["domainLookupStart","domainLookupEnd","Domain lookup"],["connectStart","connectEnd","Making a connection to the server"],["requestStart","responseEnd","Requesting and receiving the document"],["domLoading","domInteractive","Parsing the document, executing sync. scripts"],["domContentLoadedEventStart","domContentLoadedEventEnd",'Fire "DOMContentLoaded" event'],["loadEventStart","loadEventEnd",'Fire "load" event']],je=["fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],Fe=["fs","ls","le","cs","ce","qs","rs","re","dl","di","ds","de","dc","es","ee"],Re=function(){function t(t,e){this._configService=t,this._loggingService=e,this.queue=void 0,this.throttleEvents=E}var e=t.prototype;return e.init=function(){var t=this,e=this._configService.get("queueLimit"),n=this._configService.get("flushInterval"),r=this._configService.get("eventsLimit");this.queue=new Ce(function(e){var n=t.sendEvents(e);n&&n["catch"](function(e){t._loggingService.warn("Failed sending events!",t._constructError(e))})},{queueLimit:e,flushInterval:n}),this.throttleEvents=function(t,e,n){var r,i=this,a=n.limit,o=n.interval,s=0;return function(){return s++,void 0===r&&(r=setTimeout(function(){s=0,r=void 0},o)),s>a&&"function"==typeof e?e.apply(i,arguments):t.apply(i,arguments)}}(this.queue.add.bind(this.queue),function(){return t._loggingService.warn("Dropped events due to throttling!")},{limit:r,interval:6e4})},e._postJson=function(t,e){return this._makeHttpRequest("POST",t,{payload:e,headers:{"Content-Type":"application/x-ndjson"}}).then(function(t){return t.responseText})},e._constructError=function(t){var e=t.url,n=t.status;if(t.responseText,void 0===n)return t;var r=e+" HTTP status: "+n;return new Error(r)},e._makeHttpRequest=function(t,e,n){var r=void 0===n?{timeout:1e4}:n,i=r.timeout,a=r.payload,o=r.headers;return new ut(function(n,r){var s=new window.XMLHttpRequest;if(s[mt]=!0,s.open(t,e,!0),s.timeout=i,o)for(var c in o)o.hasOwnProperty(c)&&s.setRequestHeader(c,o[c]);s.onreadystatechange=function(){if(4===s.readyState){var t=s.status,i=s.responseText;0===t||t>399&&t<600?r({url:e,status:t,responseText:i}):n(s)}},s.onerror=function(){var t=s.status,n=s.responseText;r({url:e,status:t,responseText:n})},s.send(a)})},e.fetchConfig=function(t,e){var n=this,r=this._configService.get("serverUrl")+"/config/v1/rum/agents";if(!t)return ut.reject("serviceName is required for fetching central config.");r+="?service.name="+t,e&&(r+="&service.environment="+e);var i=this._configService.getLocalConfig();return i&&(r+="&ifnonematch="+i.etag),this._makeHttpRequest("GET",r,{timeout:5e3}).then(function(t){var e=t.status,r=t.responseText;if(304===e)return i;var a=JSON.parse(r),o=t.getResponseHeader("etag");return o&&(a.etag=o.replace(/["]/g,""),n._configService.setLocalConfig(a)),a})["catch"](function(t){var e=n._constructError(t);return ut.reject(e)})},e.createMetaData=function(){var t=this._configService,e={service:{name:t.get("serviceName"),version:t.get("serviceVersion"),agent:{name:"rum-js",version:t.version},language:{name:"javascript"},environment:t.get("environment")},labels:t.get("context.tags")};return X(Te,e)},e.addError=function(t){var e;this.throttleEvents(((e={}).errors=t,e))},e.addTransaction=function(t){var e;this.throttleEvents(((e={}).transactions=t,e))},e.ndjsonErrors=function(t,e){var n=e?"e":"error";return t.map(function(t){var r;return Ie.stringify(((r={})[n]=e?function(t){var e,n=t.exception,r={id:t.id,cl:t.culprit,ex:{mg:n.message,st:(e=n.stacktrace,e.map(function(t){return{ap:t.abs_path,f:t.filename,fn:t["function"],li:t.lineno,co:t.colno}})),t:t.type},c:K(t.context)},i=t.transaction;return i&&(r.tid=t.trace_id,r.pid=t.parent_id,r.xid=t.transaction_id,r.x={t:i.type,sm:i.sampled}),r}(t):t,r))})},e.ndjsonMetricsets=function(t){return t.map(function(t){return Ie.stringify({metricset:t})}).join("")},e.ndjsonTransactions=function(t,e){var n=this,r=e?"x":"transaction";return t.map(function(t){var i,a="",o="";return e||(t.spans&&(a=t.spans.map(function(t){return Ie.stringify({span:t})}).join(""),delete t.spans),t.breakdown&&(o=n.ndjsonMetricsets(t.breakdown),delete t.breakdown)),Ie.stringify(((i={})[r]=e?function(t){var e,n=t.spans.map(function(e){var n={id:e.id,n:e.name,t:e.type,s:e.start,d:e.duration,c:K(e.context)};return e.parent_id!==t.id&&(n.pid=e.parent_id),!0===e.sync&&(n.sy=!0),e.subtype&&(n.su=e.subtype),e.action&&(n.ac=e.action),n});return{id:t.id,tid:t.trace_id,n:t.name,t:t.type,d:t.duration,c:K(t.context),m:Q(t.marks),me:(e=t.breakdown,e.map(function(t){var e=t.span,n=t.samples,r=null!=e;return r?{y:{t:e.type},sa:{ysc:{v:n["span.self_time.count"].value},yss:{v:n["span.self_time.sum.us"].value}}}:{sa:{xdc:{v:n["transaction.duration.count"].value},xds:{v:n["transaction.duration.sum.us"].value},xbc:{v:n["transaction.breakdown.count"].value}}}})),y:n,yc:{sd:n.length},sm:t.sampled}}(t):t,i))+a+o})},e.sendEvents=function(t){var e,n;if(0!==t.length){for(var r=[],i=[],a=0;a<t.length;a++){var o=t[a];o.transactions&&r.push(o.transactions),o.errors&&i.push(o.errors)}if(0!==r.length||0!==i.length){var s=this._configService,c=((e={}).transactions=r,e.errors=i,e),u=s.applyFilters(c);if(u){var f=s.get("apiVersion"),d=f>2,p=[],l=this.createMetaData(),h=d?"m":"metadata";p.push(Ie.stringify(((n={})[h]=d?function(t){var e=t.service,n=t.labels,r=e.agent,i=e.language;return{se:{n:e.name,ve:e.version,a:{n:r.name,ve:r.version},la:{n:i.name},en:e.environment},l:n}}(l):l,n)));var v=(p=p.concat(this.ndjsonErrors(u.errors,d),this.ndjsonTransactions(u.transactions,d))).join(""),g=s.get("serverUrl")+"/intake/v"+f+"/rum/events";return this._postJson(g,v)}this._loggingService.warn("Dropped payload due to filtering!")}}},t}(),Ae=function(){function t(){this.config={serviceName:"",serviceVersion:"",environment:"",serverUrl:"http://localhost:8200",active:!0,instrument:!0,disableInstrumentations:[],logLevel:"warn",breakdownMetrics:!1,ignoreTransactions:[],eventsLimit:80,queueLimit:-1,flushInterval:500,distributedTracing:!0,distributedTracingOrigins:[],distributedTracingHeaderName:"traceparent",pageLoadTraceId:"",pageLoadSpanId:"",pageLoadSampled:!1,pageLoadTransactionName:"",transactionSampleRate:1,centralConfig:!1,monitorLongtasks:!0,apiVersion:2,context:{}},this.events=new ie,this.filters=[],this.version=""}var e=t.prototype;return e.init=function(){var t=function(t){if(!t)return{};for(var e={},n=/^data-([\w-]+)$/,r=t.attributes,i=0;i<r.length;i++){var a=r[i];if(n.test(a.nodeName)){var o=a.nodeName.match(n)[1].split("-").map(function(t,e){return e>0?t.charAt(0).toUpperCase()+t.substring(1):t}).join("");e[o]=a.value||a.nodeValue}}return e}(b());this.setConfig(t)},e.isActive=function(){return this.get("active")},e.setVersion=function(t){this.version=t},e.addFilter=function(t){if("function"!=typeof t)throw new Error("Argument to must be function");this.filters.push(t)},e.applyFilters=function(t){for(var e=0;e<this.filters.length;e++)if(!(t=this.filters[e](t)))return;return t},e.get=function(t){return t.split(".").reduce(function(t,e){return t&&t[e]},this.config)},e.setUserContext=function(t){void 0===t&&(t={});var e={},n=t,r=n.id,i=n.username,a=n.email;"number"!=typeof r&&"string"!=typeof r||(e.id=r),"string"==typeof i&&(e.username=i),"string"==typeof a&&(e.email=a),this.config.context.user=T(this.config.context.user||{},e)},e.setCustomContext=function(t){void 0===t&&(t={}),this.config.context.custom=T(this.config.context.custom||{},t)},e.addLabels=function(t){var e=this;this.config.context.tags||(this.config.context.tags={}),Object.keys(t).forEach(function(n){return v(n,t[n],e.config.context.tags)})},e.setConfig=function(t){void 0===t&&(t={}),t.serverUrl&&(t.serverUrl=t.serverUrl.replace(/\/+$/,"")),S(this.config,t),this.events.send("config:change",[this.config])},e.validate=function(t){void 0===t&&(t={});var e=["serviceName","serverUrl"],n={missing:[],invalid:[]};Object.keys(t).forEach(function(r){-1===e.indexOf(r)||t[r]||n.missing.push(r)}),t.serviceName&&!/^[a-zA-Z0-9 _-]+$/.test(t.serviceName)&&n.invalid.push({key:"serviceName",value:t.serviceName,allowed:"a-z, A-Z, 0-9, _, -, <space>"});var r=t.transactionSampleRate;return void 0!==r&&("number"!=typeof r||isNaN(r)||r<0||r>1)&&n.invalid.push({key:"transactionSampleRate",value:r,allowed:"Number between 0 and 1"}),n},e.getLocalConfig=function(){var t=sessionStorage.getItem("elastic_apm_config");if(t)return JSON.parse(t)},e.setLocalConfig=function(t){t&&sessionStorage.setItem("elastic_apm_config",JSON.stringify(t))},t}(),Me=function(){function t(t){void 0===t&&(t={}),this.levels=["trace","debug","info","warn","error"],this.level=t.level||"info",this.prefix=t.prefix||"",this.resetLogMethods()}var e=t.prototype;return e.shouldLog=function(t){return this.levels.indexOf(t)>=this.levels.indexOf(this.level)},e.setLevel=function(t){this.level=t,this.resetLogMethods()},e.resetLogMethods=function(){var t=this;this.levels.forEach(function(e){t[e]=t.shouldLog(e)?function(){var n,r=t.prefix;switch(e){case"trace":case"debug":n="info";break;default:n=e}var i=arguments;if(r&&(i[0]=r+i[0]),console){var a=console[n]||console.log;"function"==typeof a&&a.apply(console,i)}}:E})},t}(),Pe=((re={})[Vt]=function(){return new Ae},re[Xt]=function(){return new Me({prefix:"[Elastic APM] "})},re[Jt]=function(t){var e=t.getService([Vt,Xt]),n=e[0],r=e[1];return new Re(n,r)},re),qe=function(){function t(){this.instances={},this.initialized=!1}var e=t.prototype;return e.init=function(){function t(t,e){var n=e.get("logLevel");t.setLevel(n)}if(!this.initialized){this.initialized=!0;var e=this.getService(Vt);e.init();var n=this.getService(Xt);t(n,e),e.events.observe("config:change",function(){t(n,e)}),this.getService(Jt).init()}},e.getService=function(t){var e=this;return"string"==typeof t?(this.instances[t]||"function"==typeof Pe[t]&&(this.instances[t]=Pe[t](this)),this.instances[t]):Array.isArray(t)?t.map(function(t){return e.getService(t)}):void 0},t}(),He=.05,De=function(){function t(t,e,n,r){this._apmServer=t,this._configService=e,this._logginService=n,this._transactionService=r}var e=t.prototype;return e.init=function(t){var e=this;void 0===t&&(t={}),this._configService.events.observe("transaction:end:after",function(t){var n=e.createTransactionPayload(t);n&&e._apmServer.addTransaction(n)}),t[At]&&ae.observe(At,this.getHistorySub()),t[Ft]&&ae.observe(Ft,this.getXHRSub()),t[Rt]&&ae.observe(Rt,this.getFetchSub()),t[Mt]&&ae.observe(Mt,this.getEventTargetSub())},e.getEventTargetSub=function(){var t=this._transactionService;return function(e,n){if(e===Tt&&n.source===Mt&&"click"===n.eventType){var r=n.target,i=r.getAttribute("name"),a="";i&&(a='["'+i+'"]');var o=r.tagName.toLowerCase(),s=t.startTransaction("Click - "+o+a,"user-interaction",{managed:!0,canReuse:!0,reuseThreshold:100});if(s){var c=r.getAttribute("class");c&&s.addContext({custom:{classes:c}})}}}},e.getHistorySub=function(){var t=this._transactionService;return function(e,n){n.source===At&&e===St&&t.startTransaction(n.data.title,"route-change",{managed:!0,canReuse:!0})}},e.getXHRSub=function(){var t=this;return function(e,n){n.source!==Ft||gt.fetchInProgress||t.processAPICalls(e,n)}},e.getFetchSub=function(){var t=this;return function(e,n){n.source===Rt&&t.processAPICalls(e,n)}},e.processAPICalls=function(t,e){var n=this._configService,r=this._transactionService;if(t===Tt&&e.data){var i=e.data,a=new fe(i.url),o=i.method+" "+(a.relative?a.path:m(a.href));r.getCurrentTransaction()||r.startTransaction(o,"http-request",{managed:!0});var s=r.startSpan(o,"external.http"),c=r.addTask();if(!s)return;var u=n.get("distributedTracing"),f=n.get("distributedTracingOrigins"),d=new fe(window.location.href),p=l(a.origin,d.origin)||l(a.origin,f),h=i.target;u&&p&&h&&this.injectDtHeader(s,h),i.sync&&(s.sync=i.sync),i.span=s,e.id=c}else t===St&&(e.data&&e.data.span&&e.data.span.end(null,e.data),e.id&&r.removeTask(e.id))},e.injectDtHeader=function(t,e){var n,r=this._configService.get("distributedTracingHeaderName"),i=function(t){if(t&&t.traceId&&t.id&&t.parentId){var e=t.sampled?"01":"00",n=t.sampled?t.id:t.parentId;return"00-"+t.traceId+"-"+n+"-"+e}}(t),a=/^[\da-f]{2}-[\da-f]{32}-[\da-f]{16}-[\da-f]{2}$/.test(n=i)&&"00000000000000000000000000000000"!==n.slice(3,35)&&"0000000000000000"!==n.slice(36,52);r&&i&&a&&("function"==typeof e.setRequestHeader?e.setRequestHeader(r,i):e.headers&&"function"==typeof e.headers.append?e.headers.append(r,i):e[r]=i)},e.extractDtHeader=function(t){var e=this._configService.get("distributedTracingHeaderName");if(t)return function(t){var e=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})$/.exec(t);if(e){var n="00"!==e[4];return{traceId:e[2],id:e[3],sampled:n}}}(t[e])},e.filterTransaction=function(t){var e=t.duration();if(!e)return!1;if(t.isManaged()){if(e>6e4)return!1;if(t.sampled&&0===t.spans.length)return!1;if(t.type!==kt&&!function(t,e,n){var r=t.browserResponsivenessCounter,i=t.duration();return r+n>=Math.floor(i/e)}(t,500,3))return!1}return!0},e.createTransactionDataModel=function(t){var e=t._start,n=t.spans.map(function(n){var r={id:n.id,transaction_id:t.id,parent_id:n.parentId||t.id,trace_id:t.traceId,name:n.name,type:n.type,subtype:n.subtype,action:n.action,sync:n.sync,start:parseInt(n._start-e),duration:n.duration(),context:n.context};return X(Ee,r)}),r={id:t.id,trace_id:t.traceId,name:t.name,type:t.type,duration:t.duration(),spans:n,context:t.context,marks:t.marks,breakdown:t.breakdownTimings,span_count:{started:n.length},sampled:t.sampled};return X(xe,r)},e.createTransactionPayload=function(t){var e=function(t){if(t.sampled){var e=t.spans.filter(function(e){return e.duration()>0&&e._start>=t._start&&e._end<=t._end});if(t.isManaged()){var n=function(t,e,n){t.sort(function(t,e){return t._start-e._start});var r=[],i=1;return t.forEach(function(a,o){if(0===r.length)r.push(a);else{var s=r[r.length-1],c=s.type===a.type&&s.subtype===a.subtype&&s.action===a.action&&s.name===a.name&&a.duration()/e<n&&(a._start-s._end)/e<n,u=t.length===o+1;c&&(i++,s._end=a._end),i>1&&(!c||u)&&(s.name=i+"x "+s.name,i=1),c||r.push(a)}}),r}(e,t.duration(),He);t.spans=n}else t.spans=e}else t.resetSpans();return t}(t);if(this.filterTransaction(e))return this.createTransactionDataModel(t)},t}(),Be=[["domainLookupStart","domainLookupEnd","DNS"],["connectStart","connectEnd","TCP"],["requestStart","responseStart","Request"],["responseStart","responseEnd","Response"],["domLoading","domComplete","Processing"],["loadEventStart","loadEventEnd","Load"]],ze=function(t){function e(e,n,r){var i;return(i=t.call(this,e,n,r)||this).traceId=p(),i.marks=void 0,i.spans=[],i._activeSpans={},i.nextAutoTaskId=1,i._scheduledTasks=[],i.captureTimings=!1,i.breakdownTimings=[],i.sampled=Math.random()<=i.options.transactionSampleRate,i.browserResponsivenessCounter=0,i}var n,r;r=t,(n=e).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=e.prototype;return i.addMarks=function(t){this.marks=S(this.marks||{},t)},i.mark=function(t){var e=x(t),n=O()-this._start,r={};r[e]=n,this.addMarks({custom:r})},i.canReuse=function(){var t=this.options.reuseThreshold||5e3;return!!this.options.canReuse&&!this.ended&&O()-this._start<t},i.redefine=function(t,e,n){t&&(this.name=t),e&&(this.type=e),n&&T(this.options,n)},i.startSpan=function(t,e,n){var r=this;if(!this.ended){var i=T({},n);i.onEnd=function(t){r._onSpanEnd(t)},i.traceId=this.traceId,i.sampled=this.sampled,i.parentId||(i.parentId=this.id);var a=new ve(t,e,i);return this._activeSpans[a.id]=a,a}},i.isFinished=function(){return 0===this._scheduledTasks.length},i.detectFinish=function(){this.isFinished()&&this.end()},i.end=function(t){if(!this.ended){for(var e in this.ended=!0,this._end=L(t),this._activeSpans){var n=this._activeSpans[e];n.type=n.type+Yt,n.end(t)}this.callOnEnd()}},i.captureBreakdown=function(){this.breakdownTimings=nt(this)},i.addTask=function(t){if(void 0===t&&(t="task"+this.nextAutoTaskId++),-1==this._scheduledTasks.indexOf(t))return this._scheduledTasks.push(t),t},i.removeTask=function(t){var e=this._scheduledTasks.indexOf(t);e>-1&&this._scheduledTasks.splice(e,1),this.detectFinish()},i.resetSpans=function(){this.spans=[]},i._onSpanEnd=function(t){this.spans.push(t),delete this._activeSpans[t.id]},i.isManaged=function(){return!!this.options.managed},e}(se),Ue=function(){function t(t,e){var n=this;this._config=e,this._logger=t,this.currentTransaction=void 0,this.respIntervalId=void 0,this.recorder=new me(function(t){var e=n.getCurrentTransaction();if(e&&e.captureTimings){var r,i=!1;e.type===kt&&(i=!0);var a=B(t,{capturePaint:i}),o=a.spans,s=a.marks;(r=e.spans).push.apply(r,o),e.addMarks({agent:s})}})}var e=t.prototype;return e.ensureCurrentTransaction=function(t,e,n){var r=this.getCurrentTransaction();return r||(r=new ze(t,e,n),this.setCurrentTransaction(r),r)},e.getCurrentTransaction=function(){if(this.currentTransaction&&!this.currentTransaction.ended)return this.currentTransaction},e.setCurrentTransaction=function(t){this.currentTransaction=t},e.ensureRespInterval=function(t){var e=this,n=function(){clearInterval(e.respIntervalId),e.respIntervalId=void 0};t?void 0===this.respIntervalId&&(this.respIntervalId=setInterval(function(){var t=e.getCurrentTransaction();t?t.browserResponsivenessCounter++:n()},500)):void 0!==this.respIntervalId&&n()},e.createOptions=function(t){var e=this._config.config,n=T({transactionSampleRate:e.transactionSampleRate},t);return n.managed&&(n=T({pageLoadTraceId:e.pageLoadTraceId,pageLoadSampled:e.pageLoadSampled,pageLoadSpanId:e.pageLoadSpanId,pageLoadTransactionName:e.pageLoadTransactionName},n)),n},e.startManagedTransaction=function(t,e,n){var r=this.getCurrentTransaction(),i=!1;if(r)if(r.canReuse()&&n.canReuse){var a=r.type,o=Nt.indexOf(r.type),s=Nt.indexOf(e);o>=0&&s<o&&(a=e),r.redefine(t,a,n),i=!0}else r.end(),r=this.ensureCurrentTransaction(t,e,n);else r=this.ensureCurrentTransaction(t,e,n);var c=!0;return r.type===kt&&(i||(this.recorder.start(Ut),this.recorder.start("paint"),this.recorder.start($t)),c=!1,n.pageLoadTraceId&&(r.traceId=n.pageLoadTraceId),n.pageLoadSampled&&(r.sampled=n.pageLoadSampled),r.name===It&&n.pageLoadTransactionName&&(r.name=n.pageLoadTransactionName)),!i&&this._config.get("monitorLongtasks")&&this.recorder.start(qt),r.sampled&&(r.captureTimings=!0),this.ensureRespInterval(c),r},e.startTransaction=function(t,e,n){var r,i=this,a=this.createOptions(n),o=!0;return a.managed?this.currentTransaction===(r=this.startManagedTransaction(t,e,a))&&(o=!1):r=new ze(t,e,a),r.onEnd=function(){return i.handleTransactionEnd(r)},o&&this._config.events.send("transaction:start",[r]),r},e.handleTransactionEnd=function(t){var e=this;return this.recorder.stop(),ut.resolve().then(function(){var n=t.name,r=t.type;if(!e.shouldIgnoreTransaction(n)&&"temporary"!==r){if(r===kt){var i=e._config.get("pageLoadTransactionName");n===It&&i&&(t.name=i)}Z(t),e.adjustTransactionTime(t),e._config.get("breakdownMetrics")&&t.captureBreakdown();var a=e._config.get("context");D(t,a),e._config.events.send("transaction:end",[t])}},function(t){})},e.adjustTransactionTime=function(t){var e=t.spans,n=function(t){for(var e=t[0],n=1;n<t.length;n++){var r=t[n];e._start>r._start&&(e=r)}return e}(e);n&&n._start<t._start&&(t._start=n._start);var r=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n];-1===String(r.type).indexOf("external")&&(!e||e._end<r._end)&&(e=r)}return e}(e);r&&r._end>t._end&&(t._end=r._end);for(var i=t._end,a=0;a<e.length;a++){var o=e[a];o._end>i&&(o._end=i,o.type+=Yt),o._start>i&&(o._start=i)}},e.shouldIgnoreTransaction=function(t){var e=this._config.get("ignoreTransactions");if(e&&e.length)for(var n=0;n<e.length;n++){var r=e[n];if("function"==typeof r.test){if(r.test(t))return!0}else if(r===t)return!0}return!1},e.startSpan=function(t,e,n){var r=this.ensureCurrentTransaction(void 0,"temporary",this.createOptions({canReuse:!0,managed:!0}));if(r)return r.startSpan(t,e,n)},e.addTask=function(t){var e=this.ensureCurrentTransaction(void 0,"temporary",this.createOptions({canReuse:!0,managed:!0}));return e&&(t=e.addTask(t)),t},e.removeTask=function(t){var e=this.getCurrentTransaction();e&&e.removeTask(t)},t}(),$e=function(){function t(t,e){this._disable=e,this.serviceFactory=t,this._initialized=!1}var e=t.prototype;return e.init=function(t){var e=this;if(this.isEnabled()&&!this._initialized){this._initialized=!0;var n=this.serviceFactory.getService([Vt,Xt]),r=n[0],i=n[1];if(r.setVersion("5.2.0"),this.config(t),r.isActive()){this.serviceFactory.init();var a=function(t,e){var n,r=((n={})[Ft]=!1,n[Rt]=!1,n[At]=!1,n[kt]=!1,n[Pt]=!1,n[Mt]=!1,n);return t?(Object.keys(r).forEach(function(t){-1===e.indexOf(t)&&(r[t]=!0)}),r):r}(r.get("instrument"),r.get("disableInstrumentations"));this.serviceFactory.getService("PerformanceMonitoring").init(a),a[Pt]&&this.serviceFactory.getService("ErrorLogging").registerListeners();var o=function(){return a[kt]&&e._sendPageLoadMetrics()};r.get("centralConfig")?this.fetchCentralConfig().then(o):o()}else this._disable=!0,i.info("RUM agent is inactive")}return this},e.fetchCentralConfig=function(){var t=this.serviceFactory.getService([Jt,Xt,Vt]),e=t[0],n=t[1],r=t[2];return e.fetchConfig(r.get("serviceName"),r.get("environment")).then(function(t){var e=t.transaction_sample_rate;if(e){var i={transactionSampleRate:e=Number(e)},a=r.validate(i).invalid;if(0===a.length)r.setConfig(i);else{var o=a[0],s=o.key,c=o.value,u=o.allowed;n.warn('invalid value "'+c+'" for '+s+". Allowed: "+u+".")}}return t})["catch"](function(t){n.warn("failed fetching config:",t)})},e._sendPageLoadMetrics=function(){var t=this.startTransaction(void 0,kt,{managed:!0,canReuse:!0});t&&t.addTask(kt);var e=function(){setTimeout(function(){t&&t.removeTask(kt)})};"complete"===document.readyState?e():window.addEventListener("load",e)},e.isEnabled=function(){return!this._disable},e.observe=function(t,e){this.serviceFactory.getService(Vt).events.observe(t,e)},e.config=function(t){var e=this.serviceFactory.getService(Vt),n=e.validate(t),r=n.missing,i=n.invalid;if(0===r.length&&0===i.length)e.setConfig(t);else{var a=this.serviceFactory.getService(Xt),o="RUM agent isn't correctly configured. ";r.length>0&&(o+=r.join(", ")+" is missing",i.length>0&&(o+=", ")),i.forEach(function(t,e){var n=t.key,r=t.value,a=t.allowed;o+=n+' "'+r+'" contains invalid characters! (allowed: '+a+")"+(e!==i.length-1?", ":"")}),a.error(o),e.setConfig({active:!1})}},e.setUserContext=function(t){this.serviceFactory.getService(Vt).setUserContext(t)},e.setCustomContext=function(t){this.serviceFactory.getService(Vt).setCustomContext(t)},e.addLabels=function(t){this.serviceFactory.getService(Vt).addLabels(t)},e.setInitialPageLoadName=function(t){this.isEnabled()&&this.serviceFactory.getService(Vt).setConfig({pageLoadTransactionName:t})},e.startTransaction=function(t,e,n){if(this.isEnabled())return this.serviceFactory.getService("TransactionService").startTransaction(t,e,n)},e.startSpan=function(t,e){if(this.isEnabled())return this.serviceFactory.getService("TransactionService").startSpan(t,e)},e.getCurrentTransaction=function(){if(this.isEnabled())return this.serviceFactory.getService("TransactionService").getCurrentTransaction()},e.captureError=function(t){if(this.isEnabled())return this.serviceFactory.getService("ErrorLogging").logError(t)},e.addFilter=function(t){this.serviceFactory.getService(Vt).addFilter(t)},t}(),Ve=function(){if(dt&&window.elasticApm)return window.elasticApm;var t=z(),e=rt(),n=new $e(e,(!t));return dt&&(window.elasticApm=n),n}(),Xe=Ve.init.bind(Ve),Je=n(2),Ye=n(0),We=n(1),Ze=function(t){function e(e,n){var r;return(r=t.call(this)||this).__tracer=e,r.span=n,r.isTransaction=n instanceof ze,r.spanContext={id:n.id,traceId:n.traceId,sampled:n.sampled},r}var n,r;r=t,(n=e).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=e.prototype;return i._context=function(){return this.spanContext},i._tracer=function(){return this.__tracer},i._setOperationName=function(t){this.span.name=t},i._addTags=function(t){var e=T({},t);if(e.type&&(this.span.type=e.type,delete e.type),this.isTransaction){var n=e["user.id"],r=e["user.username"],i=e["user.email"];(n||r||i)&&(this.span.addContext({user:{id:n,username:r,email:i}}),delete e["user.id"],delete e["user.username"],delete e["user.email"])}this.span.addLabels(e)},i._log=function(t,e){"error"===t.event&&(t["error.object"]?this.__tracer.errorLogging.logError(t["error.object"]):t.message&&this.__tracer.errorLogging.logError(t.message))},i._finish=function(t){this.span.end(),t&&(this.span._end=t-g())},e}(We.Span),Ge=function(t){function e(e,n,r,i){var a;return(a=t.call(this)||this).performanceMonitoring=e,a.transactionService=n,a.loggingService=r,a.errorLogging=i,a}var n,r;r=t,(n=e).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=e.prototype;return i._startSpan=function(t,e){var n,r={managed:!0};if(e)if(r.timestamp=e.startTime,e.childOf)r.parentId=e.childOf.id;else if(e.references&&e.references.length>0){e.references.length;var i=function(t,e,n){if(null==t)throw new TypeError("array is null or not defined");var r=Object(t),i=r.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var a=0;a<i;){var o=r[a];if(e.call(n,o,a,r))return o;a++}}(e.references,function(t){return t.type()===Ye.REFERENCE_CHILD_OF});i&&(r.parentId=i.referencedContext().id)}if(!(n=this.transactionService.getCurrentTransaction()?this.transactionService.startSpan(t,void 0,r):this.transactionService.startTransaction(t,void 0,r)))return new We.Span;r.timestamp&&(n._start=r.timestamp-g());var a=new Ze(this,n);return e&&e.tags&&a.addTags(e.tags),a},i._inject=function(t,e,n){switch(e){case Ye.FORMAT_TEXT_MAP:case Ye.FORMAT_HTTP_HEADERS:this.performanceMonitoring.injectDtHeader(t,n);break;case Ye.FORMAT_BINARY:}},i._extract=function(t,e){var n;switch(t){case Ye.FORMAT_TEXT_MAP:case Ye.FORMAT_HTTP_HEADERS:n=this.performanceMonitoring.extractDtHeader(e);break;case Ye.FORMAT_BINARY:}return n||(n=null),n},e}(Je.Tracer);"undefined"!=typeof window&&window.elasticApm&&(window.elasticApm.createTracer=it.bind(window.elasticApm,window.elasticApm)),e["default"]=it}]);